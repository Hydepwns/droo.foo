var xe=Object.create;var P=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var ge=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var h=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,t)=>(typeof require<"u"?require:n)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var f=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Ce=(e,n,t,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Se(n))!be.call(e,i)&&i!==t&&P(e,i,{get:()=>n[i],enumerable:!(o=he(n,i))||o.enumerable});return e};var F=(e,n,t)=>(t=e!=null?xe(ge(e)):{},Ce(n||!e||!e.__esModule?P(t,"default",{value:e,enumerable:!0}):t,e));var T=f((st,E)=>{var ye=h("tty"),Oe=!("NO_COLOR"in process.env||process.argv.includes("--no-color"))&&("FORCE_COLOR"in process.env||process.argv.includes("--color")||process.platform==="win32"||ye.isatty(1)&&process.env.TERM!=="dumb"||"CI"in process.env),l=(e,n,t=e)=>o=>{let i=""+o,r=i.indexOf(n,e.length);return~r?e+L(i,n,t,r)+n:e+i+n},L=(e,n,t,o)=>{let i=e.substring(0,o)+t,r=e.substring(o+n.length),s=r.indexOf(n);return~s?i+L(r,n,t,s):i+r},k=(e=Oe)=>({isColorSupported:e,reset:e?n=>`\x1B[0m${n}\x1B[0m`:String,bold:e?l("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"):String,dim:e?l("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"):String,italic:e?l("\x1B[3m","\x1B[23m"):String,underline:e?l("\x1B[4m","\x1B[24m"):String,inverse:e?l("\x1B[7m","\x1B[27m"):String,hidden:e?l("\x1B[8m","\x1B[28m"):String,strikethrough:e?l("\x1B[9m","\x1B[29m"):String,black:e?l("\x1B[30m","\x1B[39m"):String,red:e?l("\x1B[31m","\x1B[39m"):String,green:e?l("\x1B[32m","\x1B[39m"):String,yellow:e?l("\x1B[33m","\x1B[39m"):String,blue:e?l("\x1B[34m","\x1B[39m"):String,magenta:e?l("\x1B[35m","\x1B[39m"):String,cyan:e?l("\x1B[36m","\x1B[39m"):String,white:e?l("\x1B[37m","\x1B[39m"):String,gray:e?l("\x1B[90m","\x1B[39m"):String,bgBlack:e?l("\x1B[40m","\x1B[49m"):String,bgRed:e?l("\x1B[41m","\x1B[49m"):String,bgGreen:e?l("\x1B[42m","\x1B[49m"):String,bgYellow:e?l("\x1B[43m","\x1B[49m"):String,bgBlue:e?l("\x1B[44m","\x1B[49m"):String,bgMagenta:e?l("\x1B[45m","\x1B[49m"):String,bgCyan:e?l("\x1B[46m","\x1B[49m"):String,bgWhite:e?l("\x1B[47m","\x1B[49m"):String});E.exports=k();E.exports.createColors=k});var U=f((it,V)=>{"use strict";V.exports=function(n){return n.map(function(t){return t&&typeof t=="object"?t.op.replace(/(.)/g,"\\$1"):/["\s]/.test(t)&&!/'/.test(t)?"'"+t.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(t)?'"'+t.replace(/(["\\$`!])/g,"\\$1")+'"':String(t).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}});var J=f((at,H)=>{"use strict";var Q="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",j=new RegExp("^"+Q+"$"),N="|&;()<> \\t",ve='"((\\\\"|[^"])*?)"',Ae="'((\\\\'|[^'])*?)'",we=/^#$/,W="'",G='"',$="$",S="",Me=4294967296;for(I=0;I<4;I++)S+=(Me*Math.random()).toString(16);var I,Ee=new RegExp("^"+S);function Te(e,n){for(var t=n.lastIndex,o=[],i;i=n.exec(e);)o.push(i),n.lastIndex===i.index&&(n.lastIndex+=1);return n.lastIndex=t,o}function $e(e,n,t){var o=typeof e=="function"?e(t):e[t];return typeof o>"u"&&t!=""?o="":typeof o>"u"&&(o="$"),typeof o=="object"?n+S+JSON.stringify(o)+S:n+o}function Ie(e,n,t){t||(t={});var o=t.escape||"\\",i="(\\"+o+`['"`+N+`]|[^\\s'"`+N+"])+",r=new RegExp(["("+Q+")","("+i+"|"+ve+"|"+Ae+")+"].join("|"),"g"),s=Te(e,r);if(s.length===0)return[];n||(n={});var c=!1;return s.map(function(p){var a=p[0];if(!a||c)return;if(j.test(a))return{op:a};var b=!1,v=!1,d="",A=!1,u;function q(){u+=1;var x,y,w=a.charAt(u);if(w==="{"){if(u+=1,a.charAt(u)==="}")throw new Error("Bad substitution: "+a.slice(u-2,u+1));if(x=a.indexOf("}",u),x<0)throw new Error("Bad substitution: "+a.slice(u));y=a.slice(u,x),u=x}else if(/[*@#?$!_-]/.test(w))y=w,u+=1;else{var M=a.slice(u);x=M.match(/[^\w\d_]/),x?(y=M.slice(0,x.index),u+=x.index-1):(y=M,u=a.length)}return $e(n,"",y)}for(u=0;u<a.length;u++){var m=a.charAt(u);if(A=A||!b&&(m==="*"||m==="?"),v)d+=m,v=!1;else if(b)m===b?b=!1:b==W?d+=m:m===o?(u+=1,m=a.charAt(u),m===G||m===o||m===$?d+=m:d+=o+m):m===$?d+=q():d+=m;else if(m===G||m===W)b=m;else{if(j.test(m))return{op:a};if(we.test(m)){c=!0;var B={comment:e.slice(p.index+u+1)};return d.length?[d,B]:[B]}else m===o?v=!0:m===$?d+=q():d+=m}}return A?{op:"glob",pattern:d}:d}).reduce(function(p,a){return typeof a>"u"?p:p.concat(a)},[])}H.exports=function(n,t,o){var i=Ie(n,t,o);return typeof t!="function"?i:i.reduce(function(r,s){if(typeof s=="object")return r.concat(s);var c=s.split(RegExp("("+S+".*?"+S+")","g"));return c.length===1?r.concat(c[0]):r.concat(c.filter(Boolean).map(function(p){return Ee.test(p)?JSON.parse(p.split(S)[1]):p}))},[])}});var z=f(R=>{"use strict";R.quote=U();R.parse=J()});var X=f((pt,K)=>{K.exports={"/Applications/Atom.app/Contents/MacOS/Atom":"atom","/Applications/Atom Beta.app/Contents/MacOS/Atom Beta":"/Applications/Atom Beta.app/Contents/MacOS/Atom Beta","/Applications/Brackets.app/Contents/MacOS/Brackets":"brackets","/Applications/Sublime Text.app/Contents/MacOS/Sublime Text":"/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl","/Applications/Sublime Text.app/Contents/MacOS/sublime_text":"/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl","/Applications/Sublime Text 2.app/Contents/MacOS/Sublime Text 2":"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl","/Applications/Sublime Text Dev.app/Contents/MacOS/Sublime Text":"/Applications/Sublime Text Dev.app/Contents/SharedSupport/bin/subl","/Applications/Visual Studio Code.app/Contents/MacOS/Electron":"code","/Applications/Visual Studio Code - Insiders.app/Contents/MacOS/Electron":"code-insiders","/Applications/VSCodium.app/Contents/MacOS/Electron":"codium","/Applications/AppCode.app/Contents/MacOS/appcode":"/Applications/AppCode.app/Contents/MacOS/appcode","/Applications/CLion.app/Contents/MacOS/clion":"/Applications/CLion.app/Contents/MacOS/clion","/Applications/IntelliJ IDEA.app/Contents/MacOS/idea":"/Applications/IntelliJ IDEA.app/Contents/MacOS/idea","/Applications/PhpStorm.app/Contents/MacOS/phpstorm":"/Applications/PhpStorm.app/Contents/MacOS/phpstorm","/Applications/PyCharm.app/Contents/MacOS/pycharm":"/Applications/PyCharm.app/Contents/MacOS/pycharm","/Applications/PyCharm CE.app/Contents/MacOS/pycharm":"/Applications/PyCharm CE.app/Contents/MacOS/pycharm","/Applications/RubyMine.app/Contents/MacOS/rubymine":"/Applications/RubyMine.app/Contents/MacOS/rubymine","/Applications/WebStorm.app/Contents/MacOS/webstorm":"/Applications/WebStorm.app/Contents/MacOS/webstorm","/Applications/MacVim.app/Contents/MacOS/MacVim":"mvim","/Applications/GoLand.app/Contents/MacOS/goland":"/Applications/GoLand.app/Contents/MacOS/goland","/Applications/Rider.app/Contents/MacOS/rider":"/Applications/Rider.app/Contents/MacOS/rider"}});var Z=f((lt,Y)=>{Y.exports={atom:"atom",Brackets:"brackets",code:"code","code-insiders":"code-insiders",codium:"codium",vscodium:"vscodium",emacs:"emacs",gvim:"gvim","idea.sh":"idea","phpstorm.sh":"phpstorm","pycharm.sh":"pycharm","rubymine.sh":"rubymine",sublime_text:"subl",vim:"vim","webstorm.sh":"webstorm","goland.sh":"goland","rider.sh":"rider"}});var te=f((mt,ee)=>{ee.exports=["Brackets.exe","Code.exe","Code - Insiders.exe","VSCodium.exe","atom.exe","sublime_text.exe","notepad++.exe","clion.exe","clion64.exe","idea.exe","idea64.exe","phpstorm.exe","phpstorm64.exe","pycharm.exe","pycharm64.exe","rubymine.exe","rubymine64.exe","webstorm.exe","webstorm64.exe","goland.exe","goland64.exe","rider.exe","rider64.exe"]});var oe=f((ut,ne)=>{var Re=h("path"),De=z(),D=h("child_process"),O=X(),re=Z(),_e=te();ne.exports=function(n){if(n)return De.parse(n);if(process.env.LAUNCH_EDITOR)return[process.env.LAUNCH_EDITOR];if(process.versions.webcontainer)return[process.env.EDITOR||"code"];try{if(process.platform==="darwin"){let t=D.execSync("ps x -o comm=",{stdio:["pipe","pipe","ignore"]}).toString(),o=Object.keys(O),i=t.split(`
`);for(let r=0;r<o.length;r++){let s=o[r];if(t.indexOf(s)!==-1)return[O[s]];let c=s.replace("/Applications","");if(t.indexOf(c)!==-1){if(s!==O[s])return[O[s]];let p=i.find(a=>a.endsWith(c));if(p!==void 0)return[p]}}}else if(process.platform==="win32"){let o=D.execSync('powershell -NoProfile -Command "Get-CimInstance -Query \\"select executablepath from win32_process where executablepath is not null\\" | % { $_.ExecutablePath }"',{stdio:["pipe","pipe","ignore"]}).toString().split(`\r
`);for(let i=0;i<o.length;i++){let r=o[i].trim(),s=Re.basename(r);if(_e.indexOf(s)!==-1)return[r]}}else if(process.platform==="linux"){let t=D.execSync("ps x --no-heading -o comm --sort=comm",{stdio:["pipe","pipe","ignore"]}).toString(),o=Object.keys(re);for(let i=0;i<o.length;i++){let r=o[i];if(t.indexOf(r)!==-1)return[re[r]]}}}catch{}return process.env.VISUAL?[process.env.VISUAL]:process.env.EDITOR?[process.env.EDITOR]:[null]}});var ie=f((dt,se)=>{var qe=h("path");se.exports=function(n,t,o,i=1){switch(qe.basename(n).replace(/\.(exe|cmd|bat)$/i,"")){case"atom":case"Atom":case"Atom Beta":case"subl":case"sublime":case"sublime_text":case"wstorm":case"charm":return[`${t}:${o}:${i}`];case"notepad++":return["-n"+o,"-c"+i,t];case"vim":case"mvim":return[`+call cursor(${o}, ${i})`,t];case"joe":case"gvim":return[`+${o}`,t];case"emacs":case"emacsclient":return[`+${o}:${i}`,t];case"rmate":case"mate":case"mine":return["--line",o,t];case"code":case"Code":case"code-insiders":case"Code - Insiders":case"codium":case"vscodium":case"VSCodium":return["-r","-g",`${t}:${o}:${i}`];case"appcode":case"clion":case"clion64":case"idea":case"idea64":case"phpstorm":case"phpstorm64":case"pycharm":case"pycharm64":case"rubymine":case"rubymine64":case"webstorm":case"webstorm64":case"goland":case"goland64":case"rider":case"rider64":return["--line",o,"--column",i,t]}return process.env.LAUNCH_EDITOR?[t,o,i]:[t]}});var ue=f((ft,me)=>{var Be=h("fs"),Pe=h("os"),le=h("path"),ae=T(),ce=h("child_process"),Fe=oe(),Le=ie();function ke(e){return(n,t)=>{console.log(),console.log(ae.red("Could not open "+le.basename(n)+" in the editor.")),t&&(t[t.length-1]!=="."&&(t+="."),console.log(ae.red("The editor process exited with an error: "+t))),console.log(),e&&e(n,t)}}function Ve(e){switch(e){case"vim":case"emacs":case"nano":return!0}return!1}var pe=/:(\d+)(:(\d+))?$/;function Ue(e){let n=e.replace(pe,""),t=e.match(pe),o=t&&t[1],i=t&&t[3];return{fileName:n,lineNumber:o,columnNumber:i}}var g=null;function je(e,n,t){let o=Ue(e),{fileName:i}=o,{lineNumber:r,columnNumber:s}=o;if(!Be.existsSync(i))return;typeof n=="function"&&(t=n,n=void 0),t=ke(t);let[c,...p]=Fe(n);if(!c){t(i,null);return}if(process.platform==="linux"&&i.startsWith("/mnt/")&&/Microsoft/i.test(Pe.release())&&(i=le.relative("",i)),r){let a=Le(c,i,r,s);p.push.apply(p,a)}else p.push(i);g&&Ve(c)&&g.kill("SIGKILL"),process.platform==="win32"?g=ce.spawn("cmd.exe",["/C",c].concat(p),{stdio:"inherit"}):g=ce.spawn(c,p,{stdio:"inherit"}),g.on("exit",function(a){g=null,a&&t(i,"(code "+a+")")}),g.on("error",function(a){t(i,a.message)})}me.exports=je});var _=F(T(),1),fe=F(ue(),1);import{access as Ne,mkdir as We,readdir as Ge,readFile as Qe,stat as He,writeFile as Je}from"fs/promises";import{createHash as ze}from"crypto";import{existsSync as Ke,readdirSync as Xe,readFileSync as Ye,statSync as Ze}from"fs";import{homedir as et,hostname as tt}from"os";import C from"path";import de from"prettier";import rt from"typescript";async function nt(e){let n=new Set,t=(...r)=>{if(process.env.DEBUG){let s=new Date,c=`${String(s.getMinutes()).padStart(2,"0")}:${String(s.getSeconds()).padStart(2,"0")}.${String(s.getMilliseconds()).padStart(3,"0")}`;console.debug(_.default.dim(c),_.default.cyan("[builder-dev-tools]"),...r)}},o=async r=>{let s=ze("md5");return s.update(r),s.digest("hex")};return{...C,getRootDir:e.getRootDir,cwd:()=>process.cwd(),exists:async r=>{try{return await Ne(r),!0}catch{return!1}},existsSync:Ke,readdir:r=>Ge(r),readdirSync:Xe,readFile:async r=>{try{return await Qe(r,"utf-8")}catch(s){if(s.code==="ENOENT")return null;throw t(s,r),s}},readFileSync(r){try{return Ye(r,"utf-8")}catch(s){if(s.code==="ENOENT")return null;throw t(s,r),s}},stat:r=>He(r),statSync:r=>Ze(r),writeFile:async(r,s)=>{r=C.normalize(r);let c={path:r,basename:C.basename(r),dirname:C.dirname(r),extname:C.extname(r)};await We(C.dirname(r),{recursive:!0}),await Je(r,s);for(let p of n)await p(c)},hash:o,getDeviceId:()=>o(`${tt()}:${et()}`),formatCode:async(r,s)=>{let c=null;try{c=await de.resolveConfig(r)}catch{}return de.format(s,{...c,filepath:r})},on:(r,s)=>{r==="change"&&n.add(s)},off:(r,s)=>{r==="change"&&n.delete(s)},debug:t,launchEditor:async r=>{try{let s=r.filePath;typeof r.line=="number"&&(s+=`:${r.line}`,typeof r.column=="number"&&(s+=`:${r.column}`)),(0,fe.default)(s,"code",(c,p)=>{console.error(`Failed to launch editor for ${c}`),p&&console.error(p)})}catch(s){console.error(`Failed to launch editor for ${String(s.message||s)}`)}},platform:()=>({runtime:"node",os:process.platform}),ts:rt}}export{nt as createDevToolsNodeSys};
